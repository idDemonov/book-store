(this["webpackJsonpbook-store"]=this["webpackJsonpbook-store"]||[]).push([[0],{152:function(e,t,a){e.exports=a(196)},196:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),c=a(48),l=a(26),i=a(20),u=a(66),m=a(30),s=function(e,t){return e.map((function(e){return e.id===t?Object(m.a)({},e,{count:e.count+1}):e}))},E=function(e,t){return e.map((function(e){return e.id===t&&e.count>1?Object(m.a)({},e,{count:e.count-1}):e}))},d=function(e,t){return e.includes(t)?e.filter((function(e){return e.id!==t.id})):[].concat(Object(u.a)(e),[t])},b={error:!1,loading:!0},p=[],k={status:!1,book:null},f=Object(i.c)({cardBooks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PUT_BOOKS_IN_STATE":var a=t.books.map((function(e){return Object(m.a)({},e,{count:1})}));return[].concat(Object(u.a)(e),Object(u.a)(a));default:return e}},basketBooks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PUT_BOOK_IN_BASKET":case"DELETE_BOOK_BASKET":return d(e,t.book);case"INCREMENT_BOOK_BASKET":return s(e,t.id);case"DECREMENT_BOOK_BASKET":return E(e,t.id);default:return e}},bootStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_IS_FETCHING":return Object(m.a)({},e,{loading:t.status});case"ERROR":return Object(m.a)({},e,{error:!0});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_MODAL":return{status:!0,book:t.book};case"CLOSE_MODAL":return{status:!1,book:null};default:return e}}}),g=a(129),O=Object(i.d)(f,Object(i.a)(g.a)),B=a(40),h=a(224),v=a(6),y=a(225),S=a(130),j=a.n(S),x=Object(v.a)({badge:{right:-3,top:13,border:"2px solid white",padding:"0 4px",backgroundColor:"#009999",color:"white"}})(h.a),N=Object(l.b)((function(e){return{basketBooks:e.basketBooks}}))((function(e){var t=e.basketBooks.length;return r.a.createElement(y.a,null,r.a.createElement(x,{badgeContent:t},r.a.createElement(j.a,null)))})),_=a(226),T=a(118),C=Object(T.a)({header:{backgroundColor:"white",padding:"0 20px"},link:{alignSelf:"center",color:"rgba(0,0,0,0.87)",textDecoration:"none"}}),I=function(){var e=C();return r.a.createElement("header",{className:e.header},r.a.createElement(_.a,{container:!0,justify:"space-between"},r.a.createElement(c.b,{className:e.link,to:"/"},r.a.createElement("h2",null,"Book Store")),r.a.createElement(c.b,{className:e.link,to:"/basket/"},r.a.createElement(N,null))))},K=a(231),A=a(233),w=a(236),M=a(235),L=a(234),D=a(87),R=Object(T.a)({root:{maxWidth:"345px",margin:"15px 10px"},title:{display:"flex",justifyContent:"space-between"},media:{height:"140px"},price:{fontWeight:700},actionArea:{display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",overflow:"hidden"},loading:{display:"flex",width:"345px",height:"330px",margin:"15px 10px",justifyContent:"center",alignItems:"center"}}),z=a(230),P=a(84),G=a.n(P),J=a(133),U=a.n(J),W=a(82),F=a(105),H=a.n(F);a(174);H.a.initializeApp({apiKey:"AIzaSyDpmz8fJuH6KsSXUz3P7kyplLoJ3nefXhY",authDomain:"bookstore-16aaf.firebaseapp.com",databaseURL:"https://bookstore-16aaf.firebaseio.com",projectId:"bookstore-16aaf",storageBucket:"bookstore-16aaf.appspot.com",messagingSenderId:"868626355609",appId:"1:868626355609:web:e5fc29ec2df263aaed2f08",measurementId:"G-XT5CH4D35J"});var X=H.a.firestore(),q=function(e){return{type:"PUT_BOOK_IN_BASKET",book:e}},Y=function(e){return{type:"DELETE_BOOK_BASKET",book:e}},Q=function(e){return{type:"INCREMENT_BOOK_BASKET",id:e}},V=function(e){return{type:"DECREMENT_BOOK_BASKET",id:e}},Z=function(e){return{type:"OPEN_MODAL",book:e}},$=function(){return{type:"CLOSE_MODAL"}},ee=function(e){return{type:"TOGGLE_IS_FETCHING",status:e}},te=function(e){return{type:"PUT_BOOKS_IN_STATE",books:e}},ae=Object(l.b)((function(e){return{basketBooks:e.basketBooks}}),(function(e){return{actions:Object(i.b)({putBookInBasket:q},e)}}))((function(e){var t=e.book,a=e.basketBooks,n=e.actions,o=Object(W.useSnackbar)().enqueueSnackbar,c=n.putBookInBasket,l=a.some((function(e){return e.id===t.id}));return r.a.createElement(z.a,{variant:"outlined",color:"primary",onClick:function(){o(l?"\u041a\u043d\u0438\u0433\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0430 \u0438\u0437 \u043a\u043e\u0440\u0437\u0438\u043d\u044b":"\u041a\u043d\u0438\u0433\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443",{variant:l?"warning":"success"}),c(t)},endIcon:l?null:r.a.createElement(G.a,null)},l?r.a.createElement(U.a,null):"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443")})),ne=a(232),re=function(e){var t=e.book,a=e.bootStatus,n=e.openModal,o=R();return a.loading?r.a.createElement(K.a,{className:o.loading},r.a.createElement(ne.a,{size:100})):r.a.createElement(K.a,{className:o.root},r.a.createElement(A.a,{onClick:function(){return n(t)}},r.a.createElement(L.a,{className:o.media,image:t.urlImage}),r.a.createElement(M.a,null,r.a.createElement("div",{className:o.title},r.a.createElement(D.a,{variant:"h6"},t.name),r.a.createElement(D.a,{variant:"subtitle1",color:"primary",className:o.price},t.price,"\u20bd")),r.a.createElement(D.a,{className:o.actionArea,variant:"body2",color:"textSecondary"},t.description))),r.a.createElement(w.a,null,r.a.createElement(ae,{book:t})))},oe=Object(T.a)({root:{backgroundColor:"#f2f3f4"}}),ce=Object(l.b)((function(e){return{cardBooks:e.cardBooks,bootStatus:e.bootStatus}}),(function(e){return Object(i.b)({openModal:Z},e)}))((function(e){var t=e.cardBooks,a=e.bootStatus,n=e.openModal,o=oe();return r.a.createElement(_.a,{className:o.root,container:!0,justify:"center",component:"main"},t.map((function(e){return r.a.createElement(re,{key:e.id,book:e,openModal:n,bootStatus:a})})))})),le=a(247),ie=Object(T.a)({modal:{display:"flex",justifyContent:"center",alignItems:"center"},modalCard:{backgroundColor:"white",padding:"10px",display:"flex",maxWidth:"1100px"},footer:{display:"flex",justifyContent:"flex-end"},bookImg:{maxWidth:"250px",paddingRight:"10px"},text:{textAlign:"end"}}),ue=a(248),me=a(238),se=a(237),Ee=function(e){var t=e.book,a=ie();return r.a.createElement(se.a,{component:"div"},r.a.createElement(ue.a,{divider:!0,button:!0},r.a.createElement(me.a,{primary:"\u0410\u0432\u0442\u043e\u0440"}),r.a.createElement(me.a,{className:a.text,primary:t.author})),r.a.createElement(ue.a,{button:!0,divider:!0},r.a.createElement(me.a,{primary:"\u0426\u0435\u043d\u0430"}),r.a.createElement(me.a,{className:a.text,primary:"".concat(t.price,"\u20bd")})),r.a.createElement(ue.a,{button:!0},r.a.createElement(me.a,{primary:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"}),r.a.createElement(me.a,{className:a.text,primary:"".concat(t.star," \u0438\u0437 5")})))},de=function(e){var t=e.modal,a=e.closeModal,n=ie(),o=t.status,c=t.book;return r.a.createElement(le.a,{className:n.modal,onClose:a,open:o},r.a.createElement("div",{className:n.modalCard},r.a.createElement("div",null,r.a.createElement("img",{className:n.bookImg,src:c&&c.urlImage,alt:"\u041a\u043d\u0438\u0433\u0430"})),r.a.createElement("div",null,r.a.createElement(D.a,{gutterBottom:!0,variant:"h5",component:"h2"},c&&c.name),r.a.createElement(D.a,{variant:"body2",color:"textSecondary",component:"p"},c&&c.description),r.a.createElement(Ee,{book:c}),r.a.createElement("div",{className:n.footer},r.a.createElement(ae,{book:c})))))},be=Object(l.b)((function(e){return{modal:e.modal}}),(function(e){return Object(i.b)({closeModal:$},e)}))((function(e){var t=e.closeModal,a=e.modal;return r.a.createElement(W.SnackbarProvider,null,r.a.createElement(ce,null),r.a.createElement(de,{modal:a,closeModal:t}))})),pe=a(140),ke=a(239),fe=a(240),ge=a(136),Oe=a.n(ge),Be=a(137),he=a.n(Be),ve=a(74),ye=a(241),Se=a(242),je=a(243),xe=a(244),Ne=function(e){var t=e.data,a=e.open;return r.a.createElement(ke.a,null,r.a.createElement(fe.a,{style:{paddingBottom:0,paddingTop:0},colSpan:5},r.a.createElement(ve.a,{in:a,timeout:"auto",unmountOnExit:!0},r.a.createElement(ye.a,{margin:2},r.a.createElement(Se.a,{size:"small"},r.a.createElement(je.a,null,r.a.createElement(ke.a,null,r.a.createElement(fe.a,{align:"left"},"\u0410\u0432\u0442\u043e\u0440"),r.a.createElement(fe.a,{align:"right"},"\u041e\u0442\u0437\u044b\u0432\u044b"),r.a.createElement(fe.a,{align:"right"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),r.a.createElement(fe.a,{align:"right"},"\u0426\u0435\u043d\u0430 \u043a\u043d\u0438\u0433\u0438"),r.a.createElement(fe.a,{align:"right"},"\u0418\u0442\u043e\u0433"))),r.a.createElement(xe.a,null,r.a.createElement(ke.a,null,r.a.createElement(fe.a,{align:"left"},t.author),r.a.createElement(fe.a,{align:"right"},t.star,"\u2605"),r.a.createElement(fe.a,{align:"right"},t.count),r.a.createElement(fe.a,{align:"right"},t.price,"\u20bd"),r.a.createElement(fe.a,{align:"right"},t.count*t.price,"\u20bd"))))))))},_e=a(134),Te=a.n(_e),Ce=a(135),Ie=a.n(Ce),Ke=function(e){var t=e.addBook,a=e.removeBook,n=e.deleteBook;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{color:"primary",onClick:t},r.a.createElement(G.a,null)),r.a.createElement(y.a,{onClick:a},r.a.createElement(Te.a,null)),r.a.createElement(y.a,{onClick:n,style:{color:"red"}},r.a.createElement(Ie.a,null)))},Ae=Object(T.a)({root:{"& > *":{borderBottom:"unset"}}}),we=function(e){var t=e.book,a=e.actions,o=a.addBookBasket,c=a.removeBookBasket,l=a.deleteBookBasket,i=Object(n.useState)(!1),u=Object(pe.a)(i,2),m=u[0],s=u[1],E=Ae();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{className:E.root},r.a.createElement(fe.a,null,r.a.createElement(y.a,{size:"small",onClick:function(){return s(!m)}},m?r.a.createElement(Oe.a,null):r.a.createElement(he.a,null))),r.a.createElement(fe.a,{scope:"row"},t.name),r.a.createElement(fe.a,{align:"center"},t.count),r.a.createElement(fe.a,{align:"center"},t.count*t.price,"\u20bd"),r.a.createElement(fe.a,{align:"right"},r.a.createElement(Ke,{deleteBook:function(){return l(t)},addBook:function(){return o(t.id)},removeBook:function(){return c(t.id)}}))),r.a.createElement(Ne,{open:m,data:t}))},Me=a(245),Le=a(142),De=function(e){var t=e.basketBooks,a=e.actions;return r.a.createElement(Me.a,{component:Le.a},r.a.createElement(Se.a,null,r.a.createElement(je.a,null,r.a.createElement(ke.a,null,r.a.createElement(fe.a,null),r.a.createElement(fe.a,null,"\u041a\u043d\u0438\u0433\u0430"),r.a.createElement(fe.a,{align:"center"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),r.a.createElement(fe.a,{align:"center"},"\u0418\u0442\u043e\u0433 \u0437\u0430 \u043a\u043d\u0438\u0433\u0443"),r.a.createElement(fe.a,null))),r.a.createElement(xe.a,null,t.map((function(e){return r.a.createElement(we,{key:e.id,book:e,actions:a})})))))},Re=a(139),ze=a.n(Re),Pe=a(138),Ge=a.n(Pe)()({root:{marginTop:30},paper:{padding:15}}),Je=function(e){var t=e.sum,a=Ge();return r.a.createElement(_.a,{container:!0,className:a.root,justify:"center"},r.a.createElement(Le.a,{className:a.paper,elevation:8},r.a.createElement(D.a,{align:"center",variant:"h6",gutterBottom:!0},"\u0418\u0442\u043e\u0433\u043e\u0432\u0430\u044f \u0446\u0435\u043d\u0430"),r.a.createElement(D.a,{color:"primary",align:"center",variant:"h5",gutterBottom:!0},t),r.a.createElement(z.a,{variant:"contained",size:"large",startIcon:r.a.createElement(ze.a,null)},"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c")))},Ue=Object(l.b)((function(e){var t,a=e.basketBooks;return{basketBooks:a,totalSum:(t=a,t.reduce((function(e,t){return e+t.price*t.count}),0))}}),(function(e){return{actions:Object(i.b)({addBookBasket:Q,removeBookBasket:V,deleteBookBasket:Y},e)}}))((function(e){var t=e.basketBooks,a=e.totalSum,n=e.actions;return r.a.createElement(r.a.Fragment,null,r.a.createElement(De,{actions:n,totalSum:a,basketBooks:t}),r.a.createElement(Je,{sum:a}))})),We=a(246),Fe=function(){return r.a.createElement(We.a,null,r.a.createElement(I,null),r.a.createElement(B.c,null,r.a.createElement(B.a,{path:"/",exact:!0,component:be}),r.a.createElement(B.a,{path:"/basket",component:Ue})))};Object(o.render)(r.a.createElement(l.a,{store:O},r.a.createElement(c.a,{basename:"/book-store"},r.a.createElement(Fe,null))),document.getElementById("root")),O.dispatch((function(e){e(ee(!0));var t=localStorage.getItem("books");null!=t?(e(ee(!1)),e(te(JSON.parse(t)))):X.collection("books").get().then((function(e){return e.docs.map((function(e){return Object(m.a)({id:e.id},e.data())}))})).catch((function(e){return console.log(e)})).then((function(t){localStorage.setItem("books",JSON.stringify(t)),e(ee(!1)),e(te(t))})).catch((function(t){return e({type:"ERROR",error:t})}))}))}},[[152,1,2]]]);
//# sourceMappingURL=main.aa3668b6.chunk.js.map